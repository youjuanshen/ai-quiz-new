<!DOCTYPE html>
<html lang="zh">

<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- ===== 全局缓存禁用（确保加载最新版本） ===== -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<title>Have a good day! – Quiz</title>

<style>
/* ======== 全局美化 ======== */
body {
    margin: 0;
    font-family: "Arial Rounded MT Bold", "微软雅黑", sans-serif;
    background: #f4f9ff;
    overflow-x: hidden;
}

/* 封面背景插画（超淡） */
#home-screen {
    background: url('https://raw.githubusercontent.com/youjuanshen/assets/main/cute-bg-light.svg') no-repeat center top;
    background-size: 90%;
    padding-top: 80px;
    text-align: center;
}

/* 标题 */
h1 {
    font-size: 2.2rem;
    color: #2a6bd4;
    margin-bottom: 10px;
}
h2 {
    font-size: 1.3rem;
    color: #444;
}

/* 下拉菜单 */
select {
    width: 260px;
    height: 45px;
    font-size: 1rem;
    border-radius: 12px;
    border: 2px solid #7ab8ff;
    padding-left: 10px;
}

/* 开始按钮 */
.start-btn {
    margin-top: 25px;
    width: 260px;
    height: 50px;
    background: #ffcf4a;
    border: none;
    border-radius: 16px;
    font-size: 1.2rem;
    font-weight: bold;
    color: #444;
    box-shadow: 0 4px 0 #e2b93b;
}
.start-btn:active {
    transform: translateY(2px);
    box-shadow: 0 2px 0 #e2b93b;
}

/* ======= 考试页面 ======= */
#exam-screen {
    display: none;
    padding: 20px;
    max-width: 900px;
    margin: auto;
}

.timer-box {
    font-size: 1.5rem;
    color: #d9534f;
    font-weight: bold;
    text-align: center;
    margin-bottom: 20px;
}

/* 播放按钮 */
.play-btn {
    margin: 10px 0;
    padding: 8px 18px;
    font-size: 1rem;
    border-radius: 10px;
    border: none;
    background: #7ab8ff;
    color: white;
}

/* 每题块 */
.question-block {
    margin-bottom: 25px;
    font-size: 1.15rem;
}

/* 手机适配 */
@media (max-width: 450px) {
    h1 { font-size: 1.8rem; }
    select, .start-btn { width: 90%; }
    .timer-box { font-size: 1.3rem; }
}
</style>

</head>

<body>

<!-- 自动绕过缓存（强制 URL 加时间戳） -->
<script>
(function () {
    if (!window.location.href.includes("v=")) {
        window.location.href = window.location.href + (window.location.href.includes("?") ? "&" : "?") + "v=" + Date.now();
    }
})();
</script>

<!-- ======================
      封面 Screen
====================== -->
<div id="home-screen">
    <h1>Have a good day!</h1>
    <h2>听力 + 阅读 + 写作｜总分 75 分｜用时 9 分钟</h2>

    <p style="font-size:1.1rem; margin-top:30px;">请选择你的学号 + 姓名：</p>

    <select id="studentSelect">
        <option value="">请选择学生</option>
        <option>01 张宇豪</option>
        <option>02 张宇豪</option>
        <option>03 张佳寒</option>
        <option>04 张睿渊</option>
        <option>05 张羽韬</option>
        <option>06 张美茹</option>
        <option>07 张嘉钦</option>
        <option>08 卢梦婷</option>
    </select>

    <br>

    <button class="start-btn" onclick="startExam()">开始答题</button>
</div>

<!-- ======================
      考试页面
====================== -->
<div id="exam-screen">

    <div class="timer-box">
        剩余时间：<span id="timer">09:00</span>
    </div>

    <h2>Part 1 – Listening 听力（25 分）</h2>

    <div class="question-block">
        <p><strong>听力第 1 题（5 分）：听音选图</strong></p>
        <button class="play-btn" onclick="playAudio('Good afternoon. Good afternoon.')">▶ Play</button><br>
        <input type="radio" name="q1"> A. 早晨，两人见面说话。<br>
        <input type="radio" name="q1"> B. 下午，LiLi 在路上遇到老师。<br>
        <input type="radio" name="q1"> C. 晚上睡觉前说话。<br>
    </div>

    <div class="question-block">
        <p><strong>听力第 2 题（5 分）：听问候选答案</strong></p>
        <button class="play-btn" onclick="playAudio('How are you? How are you?')">▶ Play</button><br>
        <input type="radio" name="q2"> A. How are you?<br>
        <input type="radio" name="q2"> B. Thank you, you too!<br>
        <input type="radio" name="q2"> C. Goodbye!<br>
    </div>

</div>

<!-- ======================
      JS：计时器 + TTS
====================== -->
<script>
let totalSeconds = 9 * 60;

// 点击开始考试
function startExam() {
    const student = document.getElementById("studentSelect").value;
    if (!student) { alert("请先选择学生姓名！"); return; }

    document.getElementById("home-screen").style.display = "none";
    document.getElementById("exam-screen").style.display = "block";

    startTimer();
}

// 计时器
function startTimer() {
    const timerObj = document.getElementById("timer");

    const countdown = setInterval(() => {
        let m = Math.floor(totalSeconds / 60);
        let s = totalSeconds % 60;

        timerObj.textContent = 
            (m < 10 ? "0" + m : m) + ":" + 
            (s < 10 ? "0" + s : s);

        if (totalSeconds <= 0) {
            clearInterval(countdown);
            alert("时间到！考试结束。");
        }

        totalSeconds--;
    }, 1000);
}

// TTS 自动两遍播放
function playAudio(text) {
    let u1 = new SpeechSynthesisUtterance(text);
    let u2 = new SpeechSynthesisUtterance(text);

    u1.rate = 0.95;
    u2.rate = 0.95;

    speechSynthesis.speak(u1);
    u1.onend = () => speechSynthesis.speak(u2);
}
</script>

</body>
</html>
