<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>Have a good day! – Listening + Reading + Writing</title>

<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
        line-height: 1.6;
    }
    h1 {
        text-align: center;
        margin-bottom: 20px;
    }
    .box {
        border: 2px solid #ddd;
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
    }
    button {
        padding: 8px 16px;
        font-size: 16px;
        cursor: pointer;
        margin-bottom: 8px;
    }
    .play-btn {
        background: #444;
        color: white;
        border: none;
        border-radius: 6px;
    }
    .question {
        margin-top: 15px;
        margin-bottom: 10px;
    }
    select {
        padding: 6px 12px;
        font-size: 16px;
    }
</style>

</head>
<body>

<h1>Have a good day! – Listening + Reading + Writing</h1>

<!-- 学生下拉菜单 -->
<label>学生姓名：</label>
<select id="studentSelect">
    <option>请选择学生</option>
    <option>01 张宇豪</option>
    <option>02 张宇豪</option>
    <option>03 张佳寒</option>
    <option>04 张睿渊</option>
    <option>05 张羽韬</option>
    <option>06 张美茹</option>
    <option>07 张嘉钦</option>
    <option>08 卢梦婷</option>
</select>

<br><br>

<!-- 计时器 -->
<label>剩余时间：</label>
<span id="time">09:00</span>
<button id="startBtn">开始计时</button>

<hr>

<!-- Part 1 Listening -->
<div class="box">
<h2>Part 1 – Listening 听力（25 分）</h2>

<div class="question">
<strong>听力第 1 题（5 分）：听音选图</strong><br>
<button class="play-btn" onclick="playTwice('Good afternoon.')">▶ Play</button><br>
<input type="radio"> A. 早晨，两人见面说话。<br>
<input type="radio"> B. 下午，LiLi 在路上遇到老师。<br>
<input type="radio"> C. 晚上睡觉前说话。<br>
</div>

<div class="question">
<strong>听力第 2 题（5 分）：听问候选句子</strong><br>
<button class="play-btn" onclick="playTwice('How are you?')">▶ Play</button><br>
<input type="radio"> A. How are you?<br>
<input type="radio"> B. Thank you, you too!<br>
<input type="radio"> C. Goodbye!<br>
</div>

<div class="question">
<strong>听力第 3 题（5 分）：情景判断 T/F</strong><br>
<button class="play-btn" onclick="playTwice('This is a bag.')">▶ Play</button><br>
<input type="radio"> T. 相符<br>
<input type="radio"> F. 不相符<br>
</div>

</div>

<!-- Part 2 Reading -->
<div class="box">
<h2>Part 2 – Reading 阅读（25 分）</h2>

<div class="question">
<strong>阅读 1：（连线拖拽题）</strong><br>
<p>将句子拖拽到正确的图片下。</p>
<ul>
<li>This is a bag.</li>
<li>This is a pen.</li>
<li>This is a ruler.</li>
</ul>
<p>（老师请在正式版加入对应图片）</p>
</div>

<div class="question">
<strong>阅读 2：判断正误 (✓✗)</strong><br>
<img src="https://via.placeholder.com/150"><br>
This is a bag.<br>
<input type="radio"> ✓<br>
<input type="radio"> ✗<br>
</div>

</div>

<!-- Part 3 Writing -->
<div class="box">
<h2>Part 3 – Writing 写作（25 分）</h2>

<div class="question">
<strong>写作 1：拖拽成句</strong><br>
This / is / my / bag.<br>
</div>

<div class="question">
<strong>写作 2：补全句子</strong><br>
This is a ___ (bag).<br>
</div>

</div>

<script>
// ======================
//   高稳定版 TTS 播放
// ======================

// 播放一次语音（基础版）
function playAudio(text) {
    if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
    }
    const u = new SpeechSynthesisUtterance(text);
    u.rate = 1;
    u.pitch = 1;
    setTimeout(() => speechSynthesis.speak(u), 0);
}

// 播放两遍（听力题使用）
function playTwice(text) {
    if (speechSynthesis.speaking) speechSynthesis.cancel();

    const combined = text + " " + text;
    const u = new SpeechSynthesisUtterance(combined);
    u.rate = 1;
    u.pitch = 1;

    setTimeout(() => speechSynthesis.speak(u), 0);
}


// ======================
//       计时器系统
// ======================
let totalSeconds = 9 * 60;
let timer = null;

function updateDisplay() {
    const m = Math.floor(totalSeconds / 60);
    const s = totalSeconds % 60;
    document.getElementById("time").textContent =
        (m < 10 ? "0" : "") + m + ":" + (s < 10 ? "0" : "") + s;
}

document.getElementById("startBtn").onclick = function () {
    if (timer) return;
    timer = setInterval(() => {
        if (totalSeconds > 0) {
            totalSeconds--;
            updateDisplay();
        } else {
            clearInterval(timer);
            alert("时间到！");
        }
    }, 1000);
};

</script>

</body>
</html>
