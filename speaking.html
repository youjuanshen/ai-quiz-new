<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å£è¯­é¢è¯•</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* ğŸ¦ ç‹®å­é£æ ¼ - å£è¯­ç‰ˆ */
        body { font-family: 'Comic Sans MS', sans-serif; background: #e3f2fd; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        
        .header-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .home-btn { background: #90a4ae; color: white; text-decoration: none; padding: 8px 15px; border-radius: 20px; font-size: 14px; font-weight: bold; }
        
        .card { background: white; border-radius: 16px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        
        /* èœå•åˆ—è¡¨ */
        .lesson-btn { display: block; width: 100%; padding: 15px; margin: 10px 0; background: #f1f8e9; border: 2px solid #c5e1a5; border-radius: 12px; text-align: left; cursor: pointer; font-size: 16px; font-weight: bold; color: #558b2f; }
        
        /* é¢˜ç›®æ ·å¼ */
        .q-tag { background: #29b6f6; color: white; padding: 4px 10px; border-radius: 10px; font-size: 12px; font-weight: bold; }
        .q-text { font-size: 20px; font-weight: bold; margin: 15px 0; color: #333; }
        .img-box { text-align: center; margin: 15px 0; background: #fafafa; padding: 10px; border-radius: 12px; }
        .img-box img { max-width: 100%; max-height: 200px; border-radius: 8px; }
        
        /* è¯„åˆ†æŒ‰é’® */
        .score-buttons { display: flex; gap: 5px; margin-top: 15px; }
        .score-btn { flex: 1; padding: 10px 0; border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; }
        .s5{background:#4caf50} .s4{background:#8bc34a} .s3{background:#ffc107;color:#333} .s2{background:#ff9800} .s1{background:#f44336}
        
        .feedback { display: none; background: #e8f5e9; color: #2e7d32; padding: 10px; border-radius: 8px; text-align: center; margin-top: 10px; font-weight: bold; }
        
        /* é€‰äººç•Œé¢ */
        select { width: 100%; padding: 12px; font-size: 16px; border: 2px solid #ddd; border-radius: 8px; margin: 10px 0 20px 0; }
    </style>
</head>
<body>

<div class="container">
    <div class="header-bar">
        <a href="index.html" class="home-btn">ğŸ  è¿”å›å¤§å…</a>
        <h2 style="margin:0; color:#0277bd;">ğŸ—£ï¸ å£è¯­é¢è¯•</h2>
    </div>

    <div id="menu-area">
        <div class="card">
            <h3>è¯·é€‰æ‹©è¯¾ç¨‹ï¼š</h3>
            <button onclick="loadLesson('data/speaking/u1_l1.js')" class="lesson-btn">ğŸ“„ Unit 1 Lesson 1</button>
            </div>
    </div>

    <div id="student-area" class="card" style="display:none; text-align:center; padding:40px 20px;">
        <div style="font-size:50px;">ğŸ“</div>
        <h3>è¯·é€‰æ‹©è€ƒç”Ÿ</h3>
        <select id="student-select">
            <option value="" disabled selected>-- ç‚¹å‡»é€‰æ‹© --</option>
        </select>
        <button onclick="startQuiz()" style="background:#0277bd; color:white; border:none; padding:12px 40px; border-radius:30px; font-size:18px; cursor:pointer;">å¼€å§‹</button>
    </div>

    <div id="quiz-area" style="display:none;"></div>
</div>

<script>
    // ğŸ“‹ 27äººçœŸå®åå•
    const STUDENTS = [
        "1. å¼ å®‡è±ª", "2. å¼ ä½³å¯’", "3. å¼ ç¿æ¸Š", "4. å¼ ç¾½éŸ¬", "5. å¼ ç¾èŒ¹",
        "6. å¼ å˜‰é’¦", "7. å¢æ¢¦å©·", "8. å¼ æ‚¦è±", "9. å¼ è¯­æ¶µ", "10. å¼ è‹±è±ª",
        "11. å¼ å¿—é¹", "12. å¼ æ™ºæ°", "13. å¼ æ¢“å©·", "14. å¼ å“çª", "15. å¼ è¯ºä¾",
        "16. å¼ é›¨æ³½", "17. å¼ ä¾å½¤", "18. å¼ è‰ºæ¥ ", "19. å¼ æ€å½¤", "20. å¼ å­è±ª",
        "21. å¼ æ¢“äº¦", "22. å¼ çš“é‘«", "23. å¼ é›¨æ¬£", "24. å¼ å¦‚æ¬£", "25. å¼ æŸæ¶µ",
        "26. å¼ æ¢“çº¯", "27. å¼ æ³½é‘«"
    ];

    // åˆå§‹åŒ–åå•
    const sel = document.getElementById('student-select');
    STUDENTS.forEach(s => {
        const opt = document.createElement('option');
        opt.value = s; opt.innerText = s;
        sel.appendChild(opt);
    });

    let currentData = null;
    let currentStudent = "";
    let totalScore = 0;

    // åŠ è½½è¯•å·
    function loadLesson(path) {
        const script = document.createElement('script');
        script.src = path;
        document.body.appendChild(script);
    }

    // æ•°æ®å›è°ƒ
    window.LOAD_QUIZ = function(data) {
        currentData = data;
        document.getElementById('menu-area').style.display = 'none';
        document.getElementById('student-area').style.display = 'block';
    }

    // å¼€å§‹
    function startQuiz() {
        if(!sel.value) return alert('è¯·é€‰äºº');
        currentStudent = sel.value;
        totalScore = 0;
        document.getElementById('student-area').style.display = 'none';
        document.getElementById('quiz-area').style.display = 'block';
        renderQuestions();
    }

    // æ¸²æŸ“é¢˜ç›®
    function renderQuestions() {
        const div = document.getElementById('quiz-area');
        div.innerHTML = `<div style="background:white;padding:10px;position:sticky;top:0;z-index:99;border-bottom:1px solid #eee;">ğŸ‘¤ è€ƒç”Ÿï¼š<b>${currentStudent}</b></div>`;
        
        currentData.questions.forEach((q, idx) => {
            let img = q.imageKey && currentData.images[q.imageKey] ? `<div class="img-box"><img src="${currentData.images[q.imageKey]}"></div>` : '';
            div.innerHTML += `
                <div class="card" id="q-${idx}">
                    <span class="q-tag">Q${q.qNum}</span>
                    <div class="q-text">${q.text}</div>
                    ${img}
                    <div style="background:#fff3e0;padding:10px;border-radius:8px;color:#e65100;margin:10px 0;">ğŸ’¡ å‚è€ƒï¼š${q.guide}</div>
                    <div id="btn-${idx}" class="score-buttons">
                        <button onclick="rate(${idx},5)" class="score-btn s5">5åˆ†</button>
                        <button onclick="rate(${idx},4)" class="score-btn s4">4åˆ†</button>
                        <button onclick="rate(${idx},3)" class="score-btn s3">3åˆ†</button>
                        <button onclick="rate(${idx},2)" class="score-btn s2">2åˆ†</button>
                        <button onclick="rate(${idx},1)" class="score-btn s1">1åˆ†</button>
                    </div>
                    <div id="fb-${idx}" class="feedback"></div>
                </div>
            `;
        });
        div.innerHTML += `<div class="card" style="text-align:center;font-size:20px;font-weight:bold;">ğŸŒŸ æ€»åˆ†ï¼š<span id="score">0</span></div>`;
    }

    // æ‰“åˆ†
    window.rate = function(idx, score) {
        document.getElementById(`btn-${idx}`).style.display = 'none';
        const fb = document.getElementById(`fb-${idx}`);
        fb.style.display = 'block';
        fb.innerText = `âœ… å¾—åˆ†ï¼š${score}`;
        totalScore += score;
        document.getElementById('score').innerText = totalScore;
        const next = document.getElementById(`q-${idx+1}`);
        if(next) setTimeout(()=>next.scrollIntoView({behavior:'smooth',block:'center'}), 300);
    }
</script>
</body>
</html>
